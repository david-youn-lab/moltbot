# 컨트롤타워

음성인식 제어 시스템의 중앙 서버

## 역할

- 모든 모듈의 중앙 연결점
- REST API 제공
- MQTT 메시지 브로커 연동
- 기기 상태 관리
- 명령어 라우팅

## 실행 방법

### 개발 모드

```bash
cd 컨트롤타워
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### 프로덕션 모드

```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
```

## API 엔드포인트

### 시스템

| 메서드 | 경로 | 설명 |
|--------|------|------|
| GET | / | 루트 |
| GET | /health | 헬스체크 |
| GET | /docs | API 문서 (Swagger) |

### 음성 명령

| 메서드 | 경로 | 설명 |
|--------|------|------|
| POST | /command | 음성 명령 처리 |

### 기기 관리

| 메서드 | 경로 | 설명 |
|--------|------|------|
| GET | /devices | 기기 목록 |
| GET | /devices/{id} | 기기 상세 |
| POST | /devices/{id}/control | 기기 제어 |

## 환경 변수

```env
HOST=0.0.0.0
PORT=8000
DEBUG=true
MQTT_BROKER=localhost
MQTT_PORT=1883
LOG_LEVEL=INFO
```

## 아키텍처

```
┌─────────────────────────────────────────────┐
│                 컨트롤타워                    │
├─────────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────┐     │
│  │ REST API│  │  MQTT   │  │ 명령어  │     │
│  │ (FastAPI)│  │ Client  │  │ Parser  │     │
│  └────┬────┘  └────┬────┘  └────┬────┘     │
│       │            │            │           │
│       └────────────┼────────────┘           │
│                    │                        │
└────────────────────┼────────────────────────┘
                     │
        ┌────────────┼────────────┐
        │            │            │
   ┌────▼────┐ ┌─────▼────┐ ┌────▼────┐
   │음성제어 │ │주변기기  │ │ AI비서  │
   │  기능   │ │  설정    │ │        │
   └─────────┘ └──────────┘ └─────────┘
```

## TODO

- [ ] 명령어 파싱 로직 구현
- [ ] 실제 MQTT 연동
- [ ] 기기 등록/해제 기능
- [ ] WebSocket 실시간 통신
- [ ] 인증/인가 추가
